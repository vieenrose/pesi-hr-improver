# Pesi HR UI/UX Improver (Pesi HR ç³»çµ±å„ªåŒ–å°å¹«æ‰‹)

é€™æ˜¯ä¸€å€‹å°ˆç‚º **ç™¾ä¸€é›»å­ (Pesi Electronics)** å“¡å·¥è¨­è¨ˆçš„ Chrome æ“´å……åŠŸèƒ½ï¼Œæ—¨åœ¨å„ªåŒ– HR ç³»çµ±çš„æ“ä½œé«”é©—ï¼Œè®“è«‹å‡èˆ‡å…¬å‡ºç”³è«‹è®Šå¾—æ›´å¿«é€Ÿã€æ›´ç›´è¦ºã€‚

![Logo](extension/icons/icon128.png)

## âœ¨ ä¸»è¦åŠŸèƒ½ (Features)

### 1. ä¸€éµå¿«é€Ÿå¡«å¯« (One-Click Filling)
*   **å¿«é€Ÿæ—¥æœŸæŒ‰éˆ•**ï¼šæä¾›ã€Œä»Šå¤©ã€ã€ã€Œæ˜å¤©ã€æŒ‰éˆ•ï¼Œä¸€éµå¸¶å…¥æ—¥æœŸã€‚
*   **æ—¥æœŸåŒæ­¥**ï¼šç¨å®¶ã€ŒåŒé–‹å§‹æ—¥ã€æŒ‰éˆ•ï¼Œè‡ªå‹•å°‡çµæŸæ—¥æœŸè¨­ç‚ºèˆ‡é–‹å§‹æ—¥æœŸç›¸åŒã€‚
*   **å¸¸ç”¨æ™‚é–“é è¨­**ï¼šå…§å»º 08:00ã€09:00ã€10:00ã€13:00ã€18:00 ç­‰å¸¸ç”¨ä¸Šä¸‹ç­æ™‚é–“ã€‚

### 2. æ™ºæ…§è¼¸å…¥æ¨™ç±¤ (Smart Input Chips)
*   è‡ªå‹•è¨˜æ†¶æ‚¨å¸¸ç”¨çš„è¼¸å…¥å…§å®¹ï¼ˆå¦‚ã€Œäº‹ç”±ã€æˆ–ã€Œå‡åˆ¥ã€ï¼‰ã€‚
*   ä¸‹æ¬¡å¡«å¯«æ™‚ï¼Œåªéœ€é»æ“Šæ¨™ç±¤å³å¯å®Œæˆè¼¸å…¥ï¼Œç„¡éœ€é‡è¤‡æ‰“å­—ã€‚

### 3. å³æ™‚æ™‚æ•¸è¨ˆç®— (Real-time Duration Calculator)
*   ç•¶æ‚¨èª¿æ•´æ—¥æœŸæˆ–æ™‚é–“æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•è¨ˆç®—ä¸¦é¡¯ç¤ºç¸½æ™‚æ•¸ï¼ˆä¾‹å¦‚ï¼š*ã€Œé è¨ˆæ™‚æ•¸ï¼š1 å¤© 4.5 å°æ™‚ã€*ï¼‰ã€‚

### 4. ç”³è«‹ç‹€æ…‹è‰²å½©æ¨™ç¤º (Visual History Enhancements)
*   è‡ªå‹•ç‚ºæ­·å²ç´€éŒ„è¡¨æ ¼åŠ ä¸Šé¡è‰²æ¨™è¨˜ï¼š
    *   ğŸŸ¢ **ç¶ è‰²**ï¼šå·²æ ¸å‡† (Approved)
    *   ğŸŸ¡ **æ©˜è‰²**ï¼šç°½æ ¸ä¸­ (Signing/Pending)
    *   ğŸ”´ **ç´…è‰²**ï¼šé€€å›/é§å› (Rejected/Return)

---

## ğŸš€ å®‰è£æŒ‡å— (Installation Guide)

### æ–¹æ³•ä¸€ï¼šå¾ Chrome ç·šä¸Šæ‡‰ç”¨ç¨‹å¼å•†åº—å®‰è£ (æ¨è–¦)
*(å¾…ä¸Šæ¶å¾Œæä¾›é€£çµ)*

### æ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£ (é–‹ç™¼è€…æ¨¡å¼)

å¦‚æœæ‚¨ä¸‹è¼‰äº†åŸå§‹ç¢¼æˆ– ZIP æª”æ¡ˆï¼Œè«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿå®‰è£ï¼š

1.  **ä¸‹è¼‰ä¸¦è§£å£“ç¸®**ï¼š
    *   ä¸‹è¼‰æœ¬å°ˆæ¡ˆçš„ ZIP æª”æ¡ˆä¸¦è§£å£“ç¸®åˆ°æ‚¨çš„é›»è…¦ä¸Šã€‚

2.  **é–‹å•Ÿæ“´å……åŠŸèƒ½ç®¡ç†é é¢**ï¼š
    *   åœ¨ Chrome ç€è¦½å™¨ç¶²å€åˆ—è¼¸å…¥ `chrome://extensions/` ä¸¦æŒ‰ä¸‹ Enterã€‚

3.  **é–‹å•Ÿé–‹ç™¼è€…æ¨¡å¼**ï¼š
    *   åœ¨é é¢å³ä¸Šè§’ï¼Œé–‹å•Ÿ **ã€Œé–‹ç™¼è€…æ¨¡å¼ã€ (Developer mode)** é–‹é—œã€‚

4.  **è¼‰å…¥æœªå°è£é …ç›®**ï¼š
    *   é»æ“Šå·¦ä¸Šè§’çš„ **ã€Œè¼‰å…¥æœªå°è£é …ç›®ã€ (Load unpacked)** æŒ‰éˆ•ã€‚
    *   é¸æ“‡æ‚¨å‰›å‰›è§£å£“ç¸®çš„ `extension` è³‡æ–™å¤¾ã€‚

5.  **å®Œæˆï¼**
    *   ç¾åœ¨æ‚¨ç™»å…¥ Pesi HR ç³»çµ±æ™‚ï¼Œæ“´å……åŠŸèƒ½å°±æœƒè‡ªå‹•é‹ä½œã€‚

---

## ğŸ› ï¸ é–‹ç™¼èˆ‡è²¢ç» (Development)

æœ¬å°ˆæ¡ˆä½¿ç”¨ç´” JavaScript (Vanilla JS) é–‹ç™¼ï¼Œç„¡éœ€ç·¨è­¯ã€‚

*   **æ ¸å¿ƒé‚è¼¯**ï¼š`content.js`
*   **æ¨£å¼è¡¨**ï¼š`styles.css`
*   **è¨­å®šæª”**ï¼š`manifest.json`

---

## éš±ç§æ¬Šè²æ˜ (Privacy Policy)
æœ¬æ“´å……åŠŸèƒ½åƒ…å°‡æ‚¨çš„è¼¸å…¥æ­·å²ï¼ˆå¦‚å¸¸ç”¨çš„è«‹å‡äº‹ç”±ï¼‰å„²å­˜åœ¨æ‚¨å€‹äººçš„ç€è¦½å™¨ä¸­ (`localStorage`)ï¼Œä¸æœƒå°‡ä»»ä½•è³‡æ–™å‚³é€åˆ°å¤–éƒ¨ä¼ºæœå™¨ã€‚

---

### A. Leave Status Banner
Provides a real-time summary of the employee's Annual Leave (ç‰¹ä¼‘):
*   **Previous Year Remainder**: Days carried over.
*   **Current Year New**: Newly accrued days.
*   **Validity Period**: The effective date range for the current quota (e.g., `114/01/01~114/12/31`).
*   **Calculation**: `(Previous + New) - Used = Remaining`.

### B. Quick Actions
Shortcut links to frequently used functions, bypassing the menu tree:
*   Overtime Apply/Query
*   Leave Apply/Query
*   Missed Clock-in Apply
*   Payslip View

### C. Anomaly Resolution (è€ƒå‹¤ç•°å¸¸é€šçŸ¥)
An intelligent workflow feature that automatically flags discrepancies between **Clock Data** (actual punches) and **Approved Forms**.

*   **Detection**: Identifies issues such as:
    *   `åŠ ç­å–®æ™‚æ•¸å°æ–¼å¡é˜æ™‚æ•¸`: Worked hours exceed approved overtime.
    *   `ç¼ºå‹¤æ™‚æ•¸å¤§æ–¼è«‹å‡å–®`: Absence duration exceeds approved leave.
    *   `æœ‰ç¼ºå‹¤æ™‚æ•¸ç„¡è«‹å‡å–®æ™‚æ•¸`: Absence detected with no corresponding leave request.
*   **Resolution Workflow**:
    *   Displays a table of issues by Date and Employee.
    *   **Actionable Links**: Each issue contains a "Filter Condition" link.
    *   **Smart Pre-filling**: Clicking the link triggers `setSelectedFormCloseNav`, opening the specific form required to fix the issue and pre-filling it with the exact **Date**, **Time**, and **Employee ID**.

## Technical Details
*   **Navigation Logic**: Relies heavily on inline JavaScript functions like `setMenuUL_Visible('ID')` to toggle menu visibility.
*   **Data Formats**:
    *   **Dates**: Passed as Excel serial date numbers (e.g., `45978` for Nov 2025).
    *   **Time**: Passed as fractional days (e.g., `0.33333` for 08:00 AM) for precise calculations.
*   **Form Integration**: The anomaly resolution links pass complex objects directly to the form opening function to ensure context is preserved.

## Chrome Extension: Pesi HR UI/UX Improver

A Chrome Extension project has been started to improve the UI/UX of the Leave and Business Trip application forms.

### Installation
1.  Open Chrome and navigate to `chrome://extensions/`.
2.  Enable **Developer mode** in the top right corner.
3.  Click **Load unpacked**.
4.  Select the `extension` folder in this project (`/home/luigi/dayoff/extension`).

### Features (Milestone 1)
*   **Target Pages**: Leave Application (`SW0029`) and Business Trip Application (`SW0210`).
*   **Enhancements**:
    *   Injects modern CSS variables and styling.
    *   Detects when the target forms are loaded.
    *   Applies a cleaner, card-based layout to forms.
